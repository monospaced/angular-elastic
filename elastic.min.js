"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="monospaced.elastic"),angular.module("monospaced.elastic",[]).constant("msdElasticConfig",{append:""}).directive("msdElastic",["$timeout","$window","msdElasticConfig",function(e,t,o){"use strict";return{require:"ngModel",restrict:"A, C",link:function(r,n,i,a){function l(){var e=b;h=p,x=getComputedStyle(p),angular.forEach(C,function(t){e+=t+":"+x.getPropertyValue(t)+";"}),w.setAttribute("style",e)}function d(){var t,o,n,i,a;h!==p&&l(),c||(c=!0,w.value=p.value+y,w.style.overflowY=p.style.overflowY,t=""===p.style.height?"auto":parseInt(p.style.height,10),o=getComputedStyle(p).getPropertyValue("width"),"px"===o.substr(o.length-2,2)&&(i=parseInt(o,10)-P.width,w.style.width=i+"px"),n=w.scrollHeight,n>$?(n=$,a="scroll"):E>n&&(n=E),n+=P.height,p.style.overflowY=a||"hidden",t!==n&&(r.$emit("elastic:resize",u,t,n),p.style.height=n+"px"),e(function(){c=!1},1,!1))}function s(){c=!1,d()}var p=n[0],u=n;if("TEXTAREA"===p.nodeName&&t.getComputedStyle){u.css({overflow:"hidden","overflow-y":"hidden","word-wrap":"break-word"});var g=p.value;p.value="",p.value=g;var h,c,y=i.msdElastic?i.msdElastic.replace(/\\n/g,"\n"):o.append,m=angular.element(t),b="position: absolute; top: -999px; right: auto; bottom: auto;left: 0; overflow: hidden; -webkit-box-sizing: content-box;-moz-box-sizing: content-box; box-sizing: content-box;min-height: 0 !important; height: 0 !important; padding: 0;word-wrap: break-word; border: 0;",f=angular.element('<textarea aria-hidden="true" tabindex="-1" style="'+b+'"/>').data("elastic",!0),w=f[0],x=getComputedStyle(p),v=x.getPropertyValue("resize"),V="border-box"===x.getPropertyValue("box-sizing")||"border-box"===x.getPropertyValue("-moz-box-sizing")||"border-box"===x.getPropertyValue("-webkit-box-sizing"),P=V?{width:parseInt(x.getPropertyValue("border-right-width"),10)+parseInt(x.getPropertyValue("padding-right"),10)+parseInt(x.getPropertyValue("padding-left"),10)+parseInt(x.getPropertyValue("border-left-width"),10),height:parseInt(x.getPropertyValue("border-top-width"),10)+parseInt(x.getPropertyValue("padding-top"),10)+parseInt(x.getPropertyValue("padding-bottom"),10)+parseInt(x.getPropertyValue("border-bottom-width"),10)}:{width:0,height:0},z=parseInt(x.getPropertyValue("min-height"),10),I=parseInt(x.getPropertyValue("height"),10),E=Math.max(z,I)-P.height,$=parseInt(x.getPropertyValue("max-height"),10),C=["font-family","font-size","font-weight","font-style","letter-spacing","line-height","text-transform","word-spacing","text-indent"];u.data("elastic")||($=$&&$>0?$:9e4,w.parentNode!==document.body&&angular.element(document.body).append(w),u.css({resize:"none"===v||"vertical"===v?"none":"horizontal"}).data("elastic",!0),"onpropertychange"in p&&"oninput"in p?p.oninput=p.onkeyup=d:p.oninput=d,m.bind("resize",s),r.$watch(function(){return a.$modelValue},function(e){s()}),r.$on("elastic:adjust",function(){l(),s()}),e(d,0,!1),r.$on("$destroy",function(){f.remove(),m.unbind("resize",s)}))}}}}]);